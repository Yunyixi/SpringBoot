<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <title>动态添加文件上传列表</title>
    <link rel="stylesheet" th:href="@{/login/css/bootstrap.min.css}">
    <script th:src="@{/login/js/jquery.min.js}"></script>
</head>
<body>
<div class="main_div">
    <div style="color: red" th:if="${uploadStatus}" th:text="${uploadStatus}">上传成功</div>
    <form enctype="multipart/form-data" method="post" th:action="@{/uploadFile}">
        上传文件:&nbsp;&nbsp;<input onclick="add()" type="button" value="添加文件"/>
        <div class="form_div" id="file" style="margin-top: 10px;" th:value="文件上传区域"></div>
        <input id="submit" style="display: none;margin-top: 10px;" type="submit"
               value="上传"/>
    </form>
</div>
<script type="text/javascript">
    // 动态添加上传按钮
    function add() {
        var innerdiv = "<div>";
        innerdiv += "<input type='file' name='fileUpload' required='required'>" +
            "<input type='button' value='删除' onclick='remove(this)'>";
        innerdiv += "</div>";
        $("#file").append(innerdiv);
        // 打开上传按钮
        $("#submit").css("display", "block");
    }

    // 删除当前行<div>
    function remove(obj) {
        $(obj).parent().remove();
        if ($("#file div").length == 0) {
            $("#submit").css("display", "none");
        }
    }
</script>
</body>
</html>
